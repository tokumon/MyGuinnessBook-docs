# 日次Worklog自動作成ルール

## トリガー条件
ユーザーが「業務終了」と入力した場合、以下のワークフローを自動実行します。

## 実行フロー

### Step 1: 環境準備
1. 現在の日付を取得（`date +%Y%m%d`）
2. 年フォルダの存在確認（`flow/[yyyy]/`）
3. 必要に応じて年フォルダを作成

### Step 2: 活動内容の分析
会話履歴から以下の情報を抽出：

#### 今日の主要活動
- 作成・編集したファイル
- 実装した機能
- 解決した問題
- 使用したツール・技術

#### 成果物の整理
- ファイル作成・更新履歴
- 機能実装状況
- ドキュメント生成状況

#### 次回タスクの特定
- 会話中に言及された「次やるべきこと」
- 未完了の作業
- 新たに発見された課題

### Step 3: Worklogファイル生成
以下のテンプレートでworklogを作成：

```markdown
# [yyyy]年[m]月[d]日 Cursor活動履歴

## 📋 サマリー
[今日の主要活動を簡潔に記述]

### 主な活動
- [活動1]
- [活動2]
- [活動3]

## 🎯 成果物

### [成果物カテゴリ1]
**ファイル**: [ファイルパス]
- [詳細説明1]
- [詳細説明2]

### [成果物カテゴリ2]
**ファイル**: [ファイルパス]
- [詳細説明1]
- [詳細説明2]

## 🔄 次やるべきこと

### 短期（1-2週間）
1. **[タスク1]** - [説明]
2. **[タスク2]** - [説明]

### 中期（1ヶ月）
3. **[タスク3]** - [説明]
4. **[タスク4]** - [説明]

### 長期（2-3ヶ月）
5. **[タスク5]** - [説明]
6. **[タスク6]** - [説明]

## 💭 今日のポエム

```
[今日の活動を振り返って感じたことを詩的に表現]
```

---

**作成者**: Cursor AI Assistant  
**作成日**: [yyyy]年[m]月[d]日  
**作業時間**: [概算時間]  
**使用ツール**: [使用したツール]
```

### Step 4: ファイル保存
- 保存先: `flow/[yyyy]/[yyyymmdd]-worklog.md`
- 既存ファイルがある場合は上書き確認
- 保存完了の確認メッセージを表示

## 実装時の注意点

### 情報抽出の精度向上
- ファイル操作履歴を優先的に参照
- 会話の文脈から活動内容を推測
- 技術的な詳細と業務的な概要をバランス良く

### エラーハンドリング
- フォルダ作成失敗時の代替手段
- ファイル保存エラー時の再試行
- 日付取得エラー時の手動入力

### 品質確保
- 活動内容の正確性確認
- 次回タスクの優先度設定
- ポエムの適切性チェック

## 使用例

**ユーザー入力**: "業務終了"

**自動実行**:
1. 日付取得: 20250723
2. フォルダ確認: flow/2025/
3. 活動分析: Epic作成、README更新
4. Worklog生成: flow/2025/20250723-worklog.md
5. 完了通知: "今日のworklogを作成しました"

## カスタマイズ可能項目
- テンプレートの内容
- 保存先フォルダ構造
- ファイル命名規則
- 活動分析の詳細度 