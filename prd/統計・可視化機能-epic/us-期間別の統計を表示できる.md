# 期間別の統計を表示できる - User Story

## 📖 概要

| 項目 | 内容 |
|------|------|
| As a | ギネス記録のユーザー |
| I want to | 特定の期間の統計情報を表示できる |
| so that | 期間ごとの記録パターンを比較・分析できる |


## 🔄 振る舞い

### 期間を選択して統計を表示する

| 項目 | 内容 |
|------|------|
| GIVEN | ユーザーが統計画面にいる |
| WHEN | 期間選択ドロップダウンから期間を選択する |
| THEN | 選択した期間の統計情報が表示される |
| AND | グラフと数値の両方が更新される |

### カスタム期間を設定して統計を表示する

| 項目 | 内容 |
|------|------|
| GIVEN | ユーザーがカスタム期間を設定したい |
| WHEN | カスタム期間ボタンをクリックして開始日と終了日を設定する |
| THEN | 設定した期間の統計情報が表示される |
| AND | 設定した期間が保存される |


## ✅ 受け入れ基準

### 必須機能
- [ ] プリセット期間（今日、今週、今月、今年、全期間）を選択できる
- [ ] カスタム期間（開始日〜終了日）を設定できる
- [ ] 選択した期間の記録数を表示できる
- [ ] 選択した期間の平均記録数を表示できる
- [ ] 選択した期間の最多記録日を表示できる
- [ ] 選択した期間のカテゴリ別統計を表示できる
- [ ] 前期間との比較を表示できる
- [ ] 期間の変更履歴を保存できる

### エラー・バリデーション
| エラー種別 | 発生条件 | 期待される動作 | エラーメッセージ |
|------------|----------|----------------|------------------|
| 無効な期間 | 終了日が開始日より前 | エラーメッセージを表示 | "終了日は開始日より後の日付を選択してください" |
| 期間が長すぎる | 1年以上の期間を選択 | 警告メッセージを表示 | "長期間の統計は表示に時間がかかる場合があります" |
| データなし | 選択期間にデータがない | 空の統計を表示 | "この期間に記録データがありません" |


## 🎨 UI/UX要件

### 関連するデザインデータ
統計画面 - MyGuinnessBook

### 主なUXフロー
1. 統計画面にアクセス
2. 期間選択ドロップダウンから期間を選択
3. 統計情報が更新される
4. 必要に応じてカスタム期間を設定
5. 期間の比較機能を使用

### 主なコンポーネント
- 期間選択ドロップダウン
- カスタム期間設定モーダル
- 期間比較スイッチ
- 期間表示ラベル

### 主なユーザーフィードバック
- 選択中の期間を明確に表示
- 期間変更時のローディング表示
- 期間比較時の差分を視覚的に表現

### 主なアクセシビリティ要件
- 期間選択をキーボードで操作可能
- 日付入力フィールドに適切なラベル
- 期間の変更をスクリーンリーダーで通知


## 🔗 関連情報

### 依存関係
- **前提条件**: 統計計算機能、グラフ表示機能
- **後続機能**: 統計レポート生成機能

### 技術的考慮事項
- 期間選択の状態をURLパラメータで管理
- 期間変更時のデータ取得を最適化
- 大量データの期間指定時のパフォーマンス対策
- 日付ライブラリ（date-fns等）の活用


## 📝 備考
- デフォルト期間は「今月」に設定
- 期間の設定はローカルストレージに保存
- 将来的には期間のテンプレート機能も検討
- 期間比較機能は段階的に実装予定 